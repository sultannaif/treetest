.rate-beans .rate-bean.red{filter:hue-rotate(330deg) saturate(3) brightness(0.9)}
.rate-beans .rate-bean.yellow{filter:hue-rotate(10deg) saturate(3) brightness(1)}
.rate-beans .rate-bean.green{filter:hue-rotate(100deg) saturate(3) brightness(0.95)}
:root{ --green:#0f5b46; --gold:#e9b949; --text:#1a1d1c; --bottom-nav-h:56px; --chat-input-h:56px; --safe-bottom: env(safe-area-inset-bottom, 0px); }
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:linear-gradient(120deg,#e6f1ee,#f5efe9);
  font-family:'Cairo',system-ui,-apple-system,Segoe UI,Roboto,Arial;color:var(--text)}
/* تأكد أن الحاوية عمود + البودي يمتد لدفع الناف للأسفل */
.screen{width:100%;max-width:420px;min-height:100vh;min-height:100svh;min-height:100dvh;margin:0 auto;background:#fff;border-radius:28px;
  box-shadow:0 10px 30px rgba(0,0,0,.08);overflow:hidden;display:flex;flex-direction:column;position:relative}
.status-bar{height:10px}
.app-header{position:relative;background:var(--green);color:#fff;padding:10px 16px 56px}
.app-header.compact{padding-bottom:44px;position:relative}

.logout-btn-compact {
  position: absolute;
  top: 10px;
  right: 16px;
  background: rgba(255, 255, 255, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.25);
  color: #fff;
  border-radius: 10px;
  width: auto;
  height: 28px;
  padding: 0 12px;
  display: flex;
  align-items: center;
  gap: 4px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-size: 12px;
  font-weight: 600;
  backdrop-filter: blur(10px);
}

.logout-btn-compact:hover {
  background: #dc3545;
  border-color: #dc3545;
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(220, 53, 69, 0.3);
}
.top-row{display:flex;align-items:center;justify-content:space-between}
.loc{display:flex;align-items:center;gap:6px;font-size:12px;opacity:.95}
.icon-btn{border:0;background:transparent;color:inherit;cursor:pointer}
.icon-btn.back{color:#111;background:#fff;border-radius:12px;width:36px;height:36px;display:grid;place-items:center}

.logout-btn {
  background: rgba(255, 255, 255, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.25);
  color: #fff;
  border-radius: 12px;
  width: auto;
  height: 36px;
  padding: 0 16px;
  display: flex;
  align-items: center;
  gap: 6px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-size: 14px;
  font-weight: 600;
  backdrop-filter: blur(10px);
}

.logout-btn:hover {
  background: #dc3545;
  border-color: #dc3545;
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);
}
.brand{display:grid;place-items:center;text-align:center}

/* شعار في الهيدر */
.brand-logo{
  height: 75px;            /* حجم موحد للشعار في جميع الصفحات */
  display:block;
}
.brand.small .brand-logo{
  height: 75px;            /* حجم موحد للشعار في جميع الصفحات */
}
.header-wave{position:absolute;left:0;right:0;bottom:-1px;height:45px;
  background:radial-gradient(120% 140% at 50% -30%, transparent 60%, #fff 61%)}

/* نقشة حبات البن في خلفية الهيدر */
.app-header::after{
  content:"";
  position:absolute;
  inset:0;
    background: 
    url("imgs/HomePage/beanUp.png") no-repeat right 16px top 18px; /* مكان النقشة */
  background-size: 220px auto;    /* كبّر/صغّر حسب صورة beanUp */
  opacity:.18;                     /* شفافية مناسبة */
  pointer-events:none;             /* لا تمنع النقر */
  mix-blend-mode: normal;          /* جرّب soft-light لو الصورة داكنة */
}

/* يمكن تصغير النقشة قليلاً في الهيدر الصغير */
.app-header.compact::after{
  background-position: right 10px top 8px;
  background-size: 180px auto;
}

/* Home */
.home-main{padding:16px; flex:1}          /* الجديد: flex:1 */
/* Tree page layout */
.tree-page{display:flex; flex-direction:column; gap:12px; padding:0PX; flex:1}
.tree-page + .ground-cta{margin-top:auto}
/* بطاقة الترحيب القابلة للنقر */
.welcome-card{
  display:flex; align-items:center; justify-content:space-between;
  gap:12px; background:#e8f3f0; border:1px solid #d2ebe4;
  border-radius:16px; padding:12px; text-decoration:none; color:inherit;
}

.welcome-divider{display:inline-block; width:1px; height:90px; background:#B1B9B7; margin:0 8px}
.welcome-card:hover{background:#eaf6f2}
.welcome-text{display:flex; flex-direction:column; gap:4px}
.welcome-bot{
  width:96px; height:96px; border-radius:0; background:transparent; padding:0;
  box-shadow:none
}

/* Loyalty card under bot */
.loyalty-card{
  display:flex; align-items:stretch; width:100%; margin-top:14px; border-radius:18px; overflow:hidden;
  box-shadow:0 6px 20px rgba(0,0,0,.08); flex-direction:row-reverse;
}
.loyalty-card .lc-left{
  width:34%; background:#e3e4e4; padding:14px 14px 10px; display:flex; flex-direction:column; justify-content:space-between; align-items:flex-end; text-align:right;
}
.loyalty-card .lc-tier{font-weight:900; letter-spacing:.08em; color:#0f5b46}
.loyalty-card .lc-big{font-size:48px; font-weight:900; color:#0f5b46; line-height:1}
.loyalty-card .lc-right{
  position:relative; flex:1; background:#0f5b46; min-height:170px; display:flex; align-items:flex-start;
}
/* خلفية حبوب خضراء صغيرة شفافة */
/* تم إزالة الحبوب الشفافة من خلفية الكارد */

/* رفع العدادات للأعلى قليلاً */
.loyalty-card .lc-counters{position:relative; display:flex; gap:26px; padding:14px 18px}
.loyalty-card .lc-counter{position:relative; display:flex; align-items:center; gap:10px; color:#fff}
.loyalty-card .lc-counter .lc-texts{display:flex; flex-direction:column; align-items:flex-start; gap:4px}
.loyalty-card .lc-num{font-size:32px; font-weight:900; line-height:1}
.loyalty-card .lc-label{font-size:20px; font-weight:800; line-height:1}
.loyalty-card .lc-circle{position:absolute; left:0; top:50%; transform:translateY(-50%); width:50px; height:50px; display:grid; place-items:center; filter:drop-shadow(0 4px 8px rgba(0,0,0,.25))}
.loyalty-card .lc-circle img{width:49px; height:55px; display:block}
.loyalty-card .lc-bean{position:absolute; left:25px; top:50%; transform:translate(-50%, -50%);}
.loyalty-card .lc-bean img{width:26px; height:26px; display:block}
.loyalty-card .lc-counter.is-green{padding-left:64px}
.loyalty-card .lc-counter.is-gold{padding-left:64px}

/* promo image below card */
.promo-after-card{margin-top:12px}
.promo-after-card .promo-img{width:100%;display:block;border-radius:16px;box-shadow:0 6px 16px rgba(0,0,0,.08)}

/* تنسيق صورة Card.png */
.card-image-container {
  display: flex;
  justify-content: center;
  margin: 16px 0;
}
.card-image {
  width: 100%;
  height: auto;
  border-radius: 16px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

/* تراكب عدادات فوق Card.png */


.kicker{font-size:20px;color:#286b59;font-weight:800;letter-spacing:0.12em}
.kicker{color:#017449}
.user-name{margin:2px 0 0;font-size:18px}
.user-name{color:#017449}
.cards-row{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:14px}
.mini-card{display:block;text-decoration:none;color:inherit;border:1px solid #e2e2e2;border-radius:16px;padding:12px}
.mini-card:hover{background:#fafafa}
.mini-title{font-size:12px;color:#48665e}
.mini-value{font-size:28px;font-weight:800;color:#2a6452}
.mini-sub{font-size:12px;color:#83938e}
/* عدادات Green/Gold في الهوم */
.mini-sub .with-counter{display:inline-flex;flex-direction:column;align-items:center;gap:2px;margin:0 4px}
.mini-sub .counter{font-weight:800;font-size:12px;line-height:1;color:#2a6452}
.mini-sub .counter.gold{color:var(--gold)}

.promo-card{border:1px dashed #cfdad6;border-radius:16px;padding:12px;display:grid;place-items:center}
.promo-card img{width:90px;opacity:.85}
.promo-title{font-size:13px;color:#5a6f6a;margin-top:4px}

/* Stats + Chips removed */

/* Tree removed */

/* Leaf counters bar (Tree page) */
/* Tree illustration */
.tree-illustration{padding:0PX}
.tree-canvas{position:relative;width:100%;aspect-ratio:1/1;max-width:520px;margin:0 auto}
.tree-layer{position:relative;width:100%;height:100%}
/* .tree-bg removed (idea canceled) */
.tree-stem{position:absolute;left:50%;bottom:-15%;transform:translateX(-50%);width:40%;max-width:260px;margin:0 0 -20px;z-index:1}
.tree-leaf{position:absolute;transform:translate(-50%, -50%);width:17%;aspect-ratio:1/0.66;filter:none; z-index:2;
  -webkit-mask: center / contain no-repeat; mask: center / contain no-repeat; background:#B1B9B7}
.tree-leaf--empty{background:#B1B9B7; opacity:.6}
.tree-leaf--green{background:#017449; opacity:1}
.tree-leaf--gold{background:#FBB607; opacity:1}
.tree-leaf--gold{cursor:pointer}
/* إزالة تدوير الأوراق الفردي بالـ id */
.leaf-counter-bar{padding:0 12px; margin-top:3px}
.lcb-inner{
  background:#0f5b46; border-radius:65px; padding:8px 14px; display:flex; align-items:center; justify-content:space-between; width:100%;
  box-shadow:0 8px 20px rgba(0,0,0,.12), inset 0 0 0 1px rgba(255,255,255,.06); height:50px;
}
.lcb-item{position:relative; display:flex; align-items:center; gap:10px; color:#fff}
.lcb-item .lcb-texts{display:flex; flex-direction:column; gap:4px}
.lcb-num{font-size:22px; font-weight:900; line-height:1}
.lcb-label{font-size:14px; font-weight:800; line-height:1}
.lcb-circle{position:absolute; left:0; top:50%; transform:translateY(-50%); width:42px; height:44px; display:grid; place-items:center; filter:drop-shadow(0 4px 8px rgba(0,0,0,.25))}
.lcb-circle img{width:42px; height:50px; display:block}
.lcb-bean{position:absolute; left:21px; top:50%; transform:translate(-50%,-50%)}
.lcb-bean img{width:22px;height:22px;display:block}
.lcb-item.is-green{padding-left:52px}
.lcb-item.is-gold{padding-left:52px}
.lcb-total{display:flex; align-items:center; gap:8px; color:#fff}
.lcb-total-num{font-size:45px; font-weight:900}

/* Ground CTA */
.ground-cta{position:relative; padding:0;}
.ground-btn{position:static; width:100%; border:0; background:transparent; padding:0; display:none; z-index:1; margin:0}
.ground-img{width:100%; display:none}
.ground-label{position:absolute; left:50%; bottom:18px; transform:translateX(-50%); color:#fff; font-weight:900; font-size:28px; text-shadow:0 3px 10px rgba(0,0,0,.25)}
.ground-btn:active .ground-label{transform:translateX(-50%) scale(0.98)}

/* Friends + Streak short pills */
.social-row{display:grid; grid-template-columns:1fr 1fr; gap:16px; padding:0 12px 0; margin-top:-1px}
.social-pill{position:relative; overflow:hidden; padding:1px 14px; display:flex; align-items:center; gap:12px; background:#0f5b46; color:#fff; text-decoration:none;
  border-radius:38px; box-shadow:0 8px 20px rgba(0,0,0,.08), inset 0 0 0 1px rgba(255,255,255,.06); height:53px}
.social-pill .sp-rect{position:absolute; inset:0; width:100%; height:100%; object-fit:cover; opacity:.22; pointer-events:none}
.social-pill .sp-avatars{display:flex; align-items:center}
.social-pill .sp-avatars img{width:42px; height:44px; border-radius:50%; border:3px solid #fff; margin-left:-24px; box-shadow:0 3px 10px rgba(0,0,0,.15)}
.social-pill .sp-avatars img:first-child{margin-left:0}
.social-pill .sp-label{font-size:20px; font-weight:800}
.streak-pill{gap:10px}
.streak-pill .sp-circle{position:relative; width:44px; height:44px; display:grid; place-items:center}
.streak-pill .sp-circle img{width:44px; height:51px; display:block}
.streak-pill .sp-fire{position:absolute; left:12px; width:28px; height:28px; display:grid; place-items:center}
.streak-pill .sp-fire img{width:49px; height:25px; display:block}
.streak-pill .sp-count{font-size:24px; font-weight:900; color:#fff; margin-right:6px; line-height:1}
/* QR */
.qr-header{background:var(--green);color:#fff;padding:10px 12px;border-bottom:5px solid #fff;
  display:flex;align-items:center;justify-content:space-between}
.qr-stats{display:flex;align-items:center;gap:14px}
.qr-stats span{font-size:12px;opacity:.85}
.qr-main{padding:24px;display:grid;place-items:center;flex:1}
.qr-box{background:#fff;border:1px solid #e6eee9;border-radius:18px;padding:20px 16px;max-width:320px;width:100%;
  text-align:center;box-shadow:0 10px 20px rgba(0,0,0,.06)}
.qr-img{width:220px;aspect-ratio:1;border-radius:12px;border:1px solid #e5e5e5;background:repeating-linear-gradient(45deg,#000 0 2px,#fff 2px 4px)}
.screen[data-page="share-qr"] .qr-img{width:280px}
.qr-brand{display:flex;align-items:center;gap:8px;justify-content:center;margin-top:8px}
.qr-brand .qr-logo{width:140px; height:auto; filter: brightness(0) saturate(100%) invert(32%) sepia(51%) saturate(1080%) hue-rotate(106deg) brightness(88%) contrast(92%)}
.qr-hint{color:#5b6f68;font-size:13px;margin-top:8px}
/* Invite button under share QR */
.qr-invite-btn{
  margin-top:12px; border:0; background:#0f5b46; color:#fff; font-weight:700;
  padding:12px 16px; border-radius:22px; cursor:pointer; box-shadow:0 4px 12px rgba(0,0,0,.12);
}
.qr-invite-btn:active{transform:translateY(1px)}

/* Hide scrollbar in QR invite list but keep scrolling */
.screen[data-page="qr-invite"] #qr-invite-list{ -ms-overflow-style:none; scrollbar-width:none; }
.screen[data-page="qr-invite"] #qr-invite-list::-webkit-scrollbar{ width:0; height:0; }

/* Drink CTA under qr-box */
.qr-cta{margin-top:16px; width:100%; display:grid; place-items:center}
.qr-drink-btn{
  border:0; cursor:pointer; font-weight:600; color:#fff;
  background:#0f5b46; padding:12px 18px; border-radius:28px; width:75%; max-width:320px;
  box-shadow:0 6px 16px rgba(0,0,0,.12);
}
.qr-drink-btn:active{transform:translateY(1px)}

/* Invite page styles */
.invite-header{display:flex; align-items:center; justify-content:space-between; padding:10px 12px; background:#fff; color:#1a1d1c}
.invite-title{font-weight:900}
.invite-main{padding:16px; display:flex; flex-direction:column; gap:16px; flex:1; justify-content:space-between}
.invite-card{background:transparent; border:0; border-radius:0; padding:12px 14px 0; box-shadow:none}
.invite-card .invite-list{display:flex; flex-direction:column; gap:12px}
.invite-card .person{display:flex; align-items:center; gap:10px; background:#fff; border:1px solid #e6eee9; border-radius:12px; padding:12px 14px; box-shadow:0 6px 16px rgba(0,0,0,.06)}
.invite-card .person-ico{width:28px; height:28px}
.invite-card .name{font-weight:900; color:#0f5b46}
.invite-footer{margin-top:auto; padding-bottom:16px; display:grid; place-items:center}
.scan-qr-cta{width:85%; max-width:320px; text-align:center; background:#0f5b46; color:#fff; font-weight:700; padding:12px 18px; border-radius:28px; box-shadow:0 6px 16px rgba(0,0,0,.12); cursor:pointer}
.add-barner-cta{width:85%; max-width:320px; text-align:center; background:#0f5b46; color:#fff; font-weight:700; padding:12px 18px; border-radius:28px; box-shadow:0 6px 16px rgba(0,0,0,.12); cursor:pointer; margin-top:10px}
.scan-qr-cta:active{transform:translateY(1px)}
.add-barner-cta:active{transform:translateY(1px)}

/* Gold person vs normal */
.invite-card .person.is-gold .person-ico{ filter: brightness(0) saturate(100%) invert(67%) sepia(91%) saturate(855%) hue-rotate(1deg) brightness(95%) contrast(104%); /* ~#DB9D00 */ }
.invite-card .person:not(.is-gold) .person-ico{ filter: brightness(0) saturate(100%) invert(22%) sepia(17%) saturate(1978%) hue-rotate(117deg) brightness(96%) contrast(92%); /* ~#017449 */ }

/* ---- Confirm leave modal ---- */
.confirm-modal{position:fixed; inset:0; display:grid; place-items:center; z-index:1002}
.confirm-modal.hidden{display:none}
.confirm-modal__backdrop{position:absolute; inset:0; background:rgba(0,0,0,.35); backdrop-filter: blur(2px)}
.confirm-modal__dialog{position:relative; width:min(92vw, 320px); background:#fff; border-radius:16px; box-shadow:0 20px 50px rgba(0,0,0,.2); padding:18px 16px; text-align:center}
.confirm-title{font-weight:900; color:#0f5b46; margin:0 0 6px}
.confirm-text{color:#5a6f6a; margin:0 0 12px}
.confirm-actions{display:flex; gap:8px; justify-content:center}
.confirm-actions .btn{flex:1; border:0; border-radius:12px; padding:10px 12px; cursor:pointer; font-weight:800}
.btn-cancel{background:#eef3f1; color:#0f5b46}
.btn-leave{background:#0f5b46; color:#fff}
/* Smooth hover/focus transition from green to red for leave button */
.confirm-actions .btn{transition:background-color .25s ease, box-shadow .25s ease, transform .2s ease}
.btn-leave{transition:background-color .25s ease, box-shadow .25s ease, transform .2s ease}
.btn-leave:hover,.btn-leave:focus{background:#c62828; box-shadow:0 8px 22px rgba(198,40,40,.25); transform:translateY(-1px)}
.btn-leave:active{transform:translateY(0); box-shadow:0 4px 12px rgba(198,40,40,.2)}

/* Rate */
.rate-split{display:flex; flex-direction:column; gap:6px; min-height:calc(100vh - var(--bottom-nav-h) - 120px); padding-top:8px}
.rate-success{display:flex; flex-direction:column; align-items:center; justify-content:flex-start; gap:2px; padding:35px 12px}
.rate-success .rs-icon{font-size:clamp(48px, 12vw, 72px); color:#1FAA59; line-height:1}
.rate-success .rs-text{margin-top:0; font-size:clamp(14px, 4.5vw, 18px); font-weight:900; color:#1FAA59}
.rate-main{padding:0 18px 18px}
.rate-card{background:#fff;border:1px solid #e6eee9;border-radius:18px;padding:16px;display:grid;justify-items:center;text-align:center}
.rate-card .cup{width:90px;opacity:.9}
.rate-card h3{margin:6px 0 10px}
.beans-row{font-size:20px}
#rate-beans{display:flex; gap:8px; align-items:center; justify-content:center; margin:8px 0}
.rate-beans .rate-bean{
  width:34px; height:34px; display:inline-block; cursor:pointer;
  background-color:#cfd0d0; opacity:.35;
  -webkit-mask:url('imgs/Rate/bean.svg') center/contain no-repeat;
  mask:url('imgs/Rate/bean.svg') center/contain no-repeat;
}
.rate-beans .rate-bean.is-red{background-color:#FF3142; opacity:1}
.rate-beans .rate-bean.is-yellow{background-color:#D4B300; opacity:1}
.rate-beans .rate-bean.is-green{background-color:#1FAA59; opacity:1}
#rate-note{width:100%;min-height:86px;border:1px solid #dfe8e4;border-radius:12px;padding:8px}
button.primary{background:#0f5b46;color:#fff;border:0;border-radius:14px;padding:10px 16px;margin-top:10px;cursor:pointer}

/* Friends */
.friends-page{display:flex; flex-direction:column; gap:14px; padding:12px; flex:1}
/* Section 1 */
.fp-profile{display:grid; place-items:center}
.fp-profile-card{display:flex; flex-direction:column; align-items:center; gap:8px}
.fp-avatar{width:92px; height:92px; border-radius:50%; object-fit:cover; border:3px solid #fff; box-shadow:0 4px 12px rgba(0,0,0,.08)}
.fp-name{font-weight:900; color:#0f5b46}

/* Section 2 */
.fp-counters{padding:0 8px}
.fp-counters-bar{display:flex; align-items:center; justify-content:space-between; gap:10px; width:100%}
.fp-counters-bar .pill{display:flex; align-items:center; gap:6px; border-radius:999px; padding:8px 14px; color:#fff; flex:0 0 auto}
.fp-counters-bar .pill.sm{padding:8px 12px}
.fp-counters-bar .pill.big{padding:8px 16px}
.fp-counters-bar .pill .ico{width:24px; height:24px}
.fp-counters-bar .pill .num{font-weight:900; font-size:16px}
.fp-counters-bar .pill .label{font-weight:800; margin-left:6px}
/* Colors from provided assets */
.fp-counters-bar .pill.green{background:#0F5B46}
.fp-counters-bar .pill.gold{background:#FBB607}
.fp-counters-bar .pill.orange{background:linear-gradient(90deg,#F5823B 0%, #833809 100%)}
.fp-counters-bar .pill.yellow{background:#F7C948; color:#fff}

/* Section 3 */
.fp-friends{--fp-card-h:108px; --fp-rows-visible:2; --fp-gap:12px; overflow:auto; height:calc(var(--fp-rows-visible) * var(--fp-card-h) + (var(--fp-rows-visible) - 1) * var(--fp-gap)); -webkit-overflow-scrolling:touch; -ms-overflow-style:none; scrollbar-width:none}
.fp-friends::-webkit-scrollbar{width:0;height:0}
.fp-friends-grid{display:grid; grid-template-columns:repeat(3,1fr); gap:12px; padding:0 15px}
.fp-friend-card{background:#0f5b46; color:#fff; border-radius:13px; padding:8px; display:flex; align-items:center; flex-wrap:wrap; min-height:var(--fp-card-h,72px)}
.fp-friend-card .photo{width:48px; height:48px; border-radius:50%; object-fit:cover; border:2px solid #fff}
.fp-friend-card .meta{display:flex; flex-direction:column; gap:4px}
.fp-friend-card .meta .name{font-weight:800}
.fp-friend-card .meta .row{display:flex; align-items:center; gap:6px; opacity:.9}
.fp-friend-card .meta .row img{width:14px; height:14px}

/* Section 4 */
.fp-trees{margin-top:auto}
.fp-trees-row{display:flex; justify-content:space-between; gap:10px; padding:2px 4px}
.fp-tree{display:flex; flex-direction:column; align-items:center; gap:4px; position:relative}
.fp-tree img{width:54px; height:54px}
.fp-tree .label{font-size:11px; color:#0f5b46; font-weight:800}
/* clickable state */
.fp-tree.is-link{cursor:pointer}
/* image wrapper to anchor overlays precisely */
.fp-tree-img{position:relative; width:54px; height:54px; display:grid; place-items:center}
/* Lock overlay for locked trees */
.fp-tree.is-locked img{filter:grayscale(100%) brightness(0.95)}
.fp-tree.is-locked .fp-tree-img::after{content:""; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); width:24px; height:24px; background:url('imgs/friends/section4/lock.svg') center/contain no-repeat; pointer-events:none}

/* Chat */
.chat-header{display:flex;align-items:center;justify-content:space-between;background:var(--green);color:#fff;padding:10px 12px}

.logout-btn-chat {
  background: rgba(255, 255, 255, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.25);
  color: #fff;
  border-radius: 12px;
  width: auto;
  height: 32px;
  padding: 0 14px;
  display: flex;
  align-items: center;
  gap: 5px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-size: 13px;
  font-weight: 600;
  backdrop-filter: blur(10px);
}

.logout-btn-chat:hover {
  background: #dc3545;
  border-color: #dc3545;
  transform: translateY(-1px);
  box-shadow: 0 3px 10px rgba(220, 53, 69, 0.3);
}
.chat-title{display:flex;align-items:center;gap:8px}
.chat-title img{width:28px;height:28px}
.chat-body{padding:12px;display:flex;flex-direction:column;gap:8px;min-height:320px; padding-bottom:84px; overflow:auto; flex:1; -webkit-overflow-scrolling: touch}
.msg{max-width:80%;padding:10px 12px;border-radius:14px;font-size:14px}
.msg.bot{background:#eff8f4;border:1px solid #dcefe6;align-self:flex-start}
.msg.me{background:#0f5b46;color:#fff;align-self:flex-end}
.chat-input{display:flex;gap:8px;border-top:1px solid #eee;padding:8px 12px;position:sticky;bottom:calc(var(--bottom-nav-h) + var(--safe-bottom) + 6px);background:#fff;z-index:10;min-height:var(--chat-input-h); border-radius:24px; box-shadow:0 6px 16px rgba(0,0,0,.08); margin:0 12px}
.chat-input input{flex:1;padding:12px 14px;border-radius:20px;border:1px solid #dfe8e4}
.chat-input .send{background:#0f5b46;color:#fff;border:0;border-radius:18px;padding:0 16px}
.chat-input input{flex:1;padding:10px 12px;border-radius:20px;border:1px solid #dfe8e4}
.chat-input .send{background:#0f5b46;color:#fff;border:0;border-radius:18px;padding:0 14px}

/* Bottom nav */
.bottom-nav{margin-top:auto; position:sticky; bottom:0; display:grid;grid-template-columns:repeat(4,1fr);
  border-top:1px solid #eaeaea;background:#fff;padding:8px; padding-bottom:calc(8px + var(--safe-bottom)); z-index:9; min-height:var(--bottom-nav-h)}
.bottom-nav .item{display:grid;justify-items:center;color:#7a8582;text-decoration:none;font-size:11px}
.bottom-nav .item .ico{font-size:18px}
.bottom-nav .item.active{color:#0f5b46;font-weight:800}
.bottom-nav .item.disabled{opacity:.45;pointer-events:none}

/* Bottom nav images (SVG) */
.bottom-nav .item .ico img{width:20px;height:20px;display:block;transition:transform .2s ease, filter .2s ease}

/* لون أخضر للأيقونة النشطة */
.bottom-nav .item.active .ico img{filter: brightness(0) saturate(100%) invert(25%) sepia(75%) saturate(473%) hue-rotate(118deg) brightness(92%) contrast(90%)}

/* مؤشر متحرك تحت الأيقونة النشطة */
.bottom-nav{position:sticky; bottom:0; display:grid;grid-template-columns:repeat(4,1fr);
  border-top:1px solid #eaeaea;background:#fff;padding:8px}

/* حالة نقر لطيفة */
.bottom-nav .item:active .ico img{transform:scale(0.9)}

/* Login Page */
.login-container {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  background: linear-gradient(135deg, #e6f1ee 0%, #f5efe9 50%, #e8f3f0 100%);
  position: relative;
  overflow: hidden;
}

.login-logo {
  text-align: center;
  padding: 60px 20px 40px;
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.logo-large {
  width: 160px;  /* تكبير من 140px إلى 160px ليكون أكثر وضوحاً */
  height: 160px; /* تكبير من 140px إلى 160px ليكون أكثر وضوحاً */
  margin-bottom: 20px;
  filter: drop-shadow(0 4px 12px rgba(15, 91, 70, 0.2));
  /* جعل الشعار SVG أخضر اللون */
  filter: drop-shadow(0 4px 12px rgba(15, 91, 70, 0.2)) brightness(0) saturate(100%) invert(27%) sepia(51%) saturate(1234%) hue-rotate(118deg) brightness(95%) contrast(101%);
}

.brand-name {
  font-size: 32px;
  font-weight: 900;
  color: var(--green);
  margin: 0 0 8px 0;
  text-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.brand-tagline {
  font-size: 14px;
  color: #5a6f6a;
  margin: 0;
  opacity: 0.8;
}

.login-form {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border-radius: 24px 24px 0 0;
  padding: 40px 24px;
  box-shadow: 0 -8px 32px rgba(0,0,0,0.1);
  position: relative;
  z-index: 2;
}

.welcome-title {
  font-size: 24px;
  font-weight: 800;
  color: var(--text);
  text-align: center;
  margin: 0 0 8px 0;
}

.welcome-subtitle {
  font-size: 14px;
  color: #5a6f6a;
  text-align: center;
  margin: 0 0 32px 0;
  opacity: 0.8;
}

.form {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.input-group {
  position: relative;
}

.input-label {
  display: block;
  font-size: 14px;
  font-weight: 600;
  color: var(--text);
  margin-bottom: 8px;
}

.name-input {
  width: 100%;
  padding: 16px 20px 16px 50px;
  border: 2px solid #e2e8e0;
  border-radius: 16px;
  font-size: 16px;
  font-family: inherit;
  background: #fff;
  transition: all 0.3s ease;
  box-sizing: border-box;
}

.name-input:focus {
  outline: none;
  border-color: var(--green);
  box-shadow: 0 0 0 3px rgba(15, 91, 70, 0.1);
  transform: translateY(-1px);
}

.input-icon {
  position: absolute;
  left: 16px;
  top: 66%;
  transform: translateY(-50%);
  font-size: 18px;
  opacity: 0.6;
}

.login-btn {
  background: linear-gradient(135deg, var(--green) 0%, #0d4a3a 100%);
  color: #fff;
  border: none;
  border-radius: 16px;
  padding: 16px 24px;
  font-size: 16px;
  font-weight: 700;
  font-family: inherit;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  box-shadow: 0 4px 16px rgba(15, 91, 70, 0.3);
}

.login-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(15, 91, 70, 0.4);
}

.login-btn:active {
  transform: translateY(0);
}

.btn-icon {
  font-size: 18px;
}

.login-decoration {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 1;
}

.coffee-beans {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-bottom: 20px;
  opacity: 0.3;
}

.coffee-beans span {
  font-size: 24px;
  animation: float 3s ease-in-out infinite;
}

.coffee-beans span:nth-child(2) {
  animation-delay: 0.5s;
}

.coffee-beans span:nth-child(3) {
  animation-delay: 1s;
}

@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
}

.wave-decoration {
  height: 60px;
  background: linear-gradient(45deg, transparent 30%, rgba(15, 91, 70, 0.1) 50%, transparent 70%);
  border-radius: 50% 50% 0 0 / 100% 100% 0 0;
}

/* Responsive */
@media (max-width:440px){ .screen{border-radius:0} }

/* --- Reward modal (gold leaf) --- */
.reward-modal{position:fixed; inset:0; display:grid; place-items:center; z-index:1000}
.reward-modal.hidden{display:none}
.reward-modal__backdrop{position:absolute; inset:0; background:rgba(0,0,0,.35); backdrop-filter: blur(2px)}
.reward-modal__dialog{position:relative; width:min(92vw, 360px); background:#fff; border-radius:18px; box-shadow:0 20px 50px rgba(0,0,0,.2); padding:18px 16px 16px; text-align:center; overflow:hidden}
.reward-close{position:absolute; right:10px; top:8px; width:32px; height:32px; border-radius:8px; border:1px solid #eee; background:#f7f7f7; cursor:pointer}
.reward-illust img{width:60px; height:60px}
.reward-title{margin:8px 0 6px; font-size:18px; color:#0f5b46}
.reward-label{margin-top:6px; font-weight:700; color:#385e53}
.code-box{margin:8px auto; padding:10px 12px; background:#0f5b46; color:#fff; border-radius:10px; font-weight:800; letter-spacing:0.08em}
.gift-box{margin:8px auto; padding:10px 12px; background:#eff8f4; color:#0f5b46; border:1px solid #d8ece4; border-radius:10px; font-weight:800}
.copy-btn{margin-top:6px; background:#e9b949; color:#1a1d1c; border:0; border-radius:10px; padding:8px 12px; font-weight:800; cursor:pointer}
.reward-cta{width:100%; margin-top:10px}

/* --- Leaf loss modal (inactivity) --- */
.loss-modal{position:absolute; inset:0; display:grid; place-items:center; z-index:1001}
.loss-modal.hidden{display:none}
.loss-modal__backdrop{position:absolute; inset:0; background:rgba(0,0,0,.45); backdrop-filter: blur(2px)}
.loss-modal__dialog{position:relative; width:100%; height:100%; background:transparent; border-radius:0; box-shadow:none; padding:0; text-align:center; overflow:hidden; display:flex; flex-direction:column; align-items:center}
.loss-header{position:relative; background:#0f5b46; color:#fff; width:100%; padding:0px 16px 98px}
.loss-header::after{content:""; position:absolute; left:0; right:0; bottom:-1px; height:126px; background:radial-gradient(120% 140% at 50% -30%, #0f5b46 60%, transparent 100%)}
.loss-header .loss-title{margin:6px 0 6px; font-size:18px; color:#fff; font-weight:900}
.loss-header .loss-sub{margin:0; font-size:14px; color:#eaf6f2; font-weight:800}
.loss-count{font-size:64px; line-height:1; font-weight:900; margin:8px 0 0; color:#fff}
.loss-title{margin:10px 0 6px; font-size:22px; color:#017449; font-weight:900}
.loss-text{margin:0 0 14px; font-size:15px; color:#5a6f6a}
.loss-ok{margin-top:auto; margin-bottom:22px; background:#0f5b46; color:#fff; border:0; border-radius:14px; padding:12px 18px; font-weight:800; cursor:pointer}
.loss-leaf-wrap{position:absolute; left:50%; top:-60px; transform:translateX(-50%); pointer-events:none; z-index:2}
.loss-leaf-sway{animation: leafSway 6s ease-in-out forwards, leafDrop 6s cubic-bezier(.25,.8,.25,1) forwards}
/* Masked green leaf shape */
.loss-leaf{width:136px; aspect-ratio:1/0.66; display:block; background:#017449; -webkit-mask:url('imgs/Tree/leaves/leave10.svg') center/contain no-repeat; mask:url('imgs/Tree/leaves/leave1.svg') center/contain no-repeat}
@keyframes leafDrop { from { top:-60px; } to { top: calc(100% + 20px); } }
@keyframes leafSway{ 0% { transform: translateX(-50%) rotate(0deg); } 20% { transform: translateX(calc(-50% - 100px)) rotate(-200deg); } 40% { transform: translateX(calc(-50% + 50px)) rotate(14deg); } 60% { transform: translateX(calc(-50% - 24px)) rotate(-10deg); } 80% { transform: translateX(calc(-50% + 16px)) rotate(8deg); } 100% { transform: translateX(calc(-50% + 8px)) rotate(0deg); } }

/* غلاف الشجرة كله */
.tree-wrapper {
  position: relative;
  width: 100%;
  max-width: 420px;   /* قفل العرض */
  margin: 0 auto;
  aspect-ratio: 1/1;  /* مربع (أو اضبط النسبة اللي تناسب التصميم) */
  overflow: hidden;
  z-index: 1;
}

/* الكانفاس يملى الغلاف */
.tree-canvas {
  width: 100%;
  height: 100%;
  display: block;
}

/* الجذع */
.tree-stem {
  position: absolute;
  left: 50%;
  bottom: 10%;  /* عدّلها حسب الطول */
  transform: translateX(-50%);
  width: 40%;
  z-index: 2;
}

/* الأرض */
.tree-ground {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  z-index: 3;
}

/* تكبير قسم الشجرة وتمدده للأسفل حتى شريط التنقل */
body[data-page="tree"] .tree-illustration{
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
}

/* زيادة ارتفاع مساحة الأوراق للأعلى عبر تكبير نسبة ارتفاع الكانفاس */
body[data-page="tree"] .tree-canvas{
  aspect-ratio: 1 / 1.2; /* كان 1/1، الآن أطول بنسبة 20% */
}

/* زيادة مساحة الحاوية نفسها للأعلى على صفحة الشجرة */
body[data-page="tree"] .tree-wrapper{
  aspect-ratio: 1 / 1.35;
}

/* Ground button inside wrapper: pinned to wrapper bottom */
body[data-page="tree"] .tree-wrapper{ position:relative; }
body[data-page="tree"] .tree-wrapper .ground-btn{
  position:absolute; left:0; right:0; bottom:0;
  width:100%; border:0; background:transparent; padding:0; margin:0;
  display:block; z-index:3;
}
body[data-page="tree"] .tree-wrapper .ground-img{ width:100%; height:auto; display:block; }

